var BaseUtils, jsondiffpatch, _;

_ = require('underscore');

jsondiffpatch = require('jsondiffpatch');


/*
Base Utils class
 */

BaseUtils = (function() {
  function BaseUtils() {}

  BaseUtils.prototype.diff = function(old_obj, new_obj) {
    var diffpatcher;
    diffpatcher = jsondiffpatch.create({
      objectHash: function(obj) {
        return obj._MATCH_CRITERIA || obj.id || obj.name;
      },
      arrays: {
        detectMove: true,
        includeValueOnMove: false
      }
    });
    return diffpatcher.diff(old_obj, new_obj);
  };

  BaseUtils.prototype.getDeltaValue = function(arr) {
    var size;
    size = arr.length;
    switch (size) {
      case 1:
        return arr[0];
      case 2:
        return arr[1];
      case 3:
        return void 0;
    }
  };

  return BaseUtils;

})();


/*
Exports object
 */

module.exports = BaseUtils;
